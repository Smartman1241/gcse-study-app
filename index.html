<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GCSE Focus</title>
  <meta name="description" content="GCSE Focus ‚Äî tasks, pomodoro, study sets, flashcards, learn and test modes." />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div class="brandText">
        <h1>GCSE Focus</h1>
        <p class="muted">Study sets ‚Ä¢ Flashcards ‚Ä¢ Learn ‚Ä¢ Test ‚Ä¢ Tasks ‚Ä¢ Timer</p>
      </div>
    </div>

    <div class="topbarActions">
      <div class="chip" title="Today & streak">
        <div class="chipLine"><span aria-hidden="true">üìÖ</span> <strong id="uiToday">‚Äî</strong></div>
        <div class="chipLine muted"><span id="uiStreak">0</span> day streak</div>
      </div>

      <button class="btn" id="btnTheme" type="button" title="Toggle theme">üåô Theme</button>
      <button class="btn" id="btnExport" type="button" title="Export your data">‚¨áÔ∏è Export</button>
      <label class="btn fileBtn" title="Import a backup">
        ‚¨ÜÔ∏è Import
        <input id="fileImport" type="file" accept="application/json" />
      </label>
      <button class="btn danger" id="btnReset" type="button" title="Reset all data">üß® Reset</button>
    </div>
  </header>

  <main class="layout">
    <!-- LEFT: Main content -->
    <section class="panel">
      <div class="panelHeader">
        <div>
          <h2>Dashboard</h2>
          <p class="muted small">Everything saves automatically on this device.</p>
        </div>

        <nav class="tabs" role="tablist" aria-label="Main sections">
          <button class="tab" role="tab" data-tab="tasks" aria-selected="true">‚úÖ Tasks</button>
          <button class="tab" role="tab" data-tab="studysets" aria-selected="false">üì¶ Study Sets</button>
          <button class="tab" role="tab" data-tab="flashcards" aria-selected="false">üÉè Flashcards</button>
          <button class="tab" role="tab" data-tab="learn" aria-selected="false">üìñ Learn</button>
          <button class="tab" role="tab" data-tab="test" aria-selected="false">üìù Test</button>
        </nav>
      </div>

      <div class="panelBody">
        <!-- TASKS -->
        <section class="tabpanel" data-tabpanel="tasks">
          <div class="twoCol">
            <div class="card">
              <div class="cardHeader">
                <h3>Add task</h3>
                <p class="muted small">Press <span class="kbd">Enter</span> to add.</p>
              </div>

              <div class="formGrid">
                <label class="field">
                  <span class="label">Task</span>
                  <input id="taskName" type="text" placeholder="e.g. Maths: simultaneous equations practice" maxlength="120" />
                </label>

                <label class="field">
                  <span class="label">Subject</span>
                  <select id="taskSubject"></select>
                </label>

                <label class="field">
                  <span class="label">Due</span>
                  <input id="taskDue" type="date" />
                </label>

                <label class="field">
                  <span class="label">Priority</span>
                  <select id="taskPriority">
                    <option value="low">Low</option>
                    <option value="med" selected>Medium</option>
                    <option value="high">High</option>
                  </select>
                </label>

                <label class="field">
                  <span class="label">Repeat</span>
                  <select id="taskRepeat">
                    <option value="none" selected>None</option>
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                  </select>
                </label>
              </div>

              <div class="row">
                <button class="btn primary" id="btnAddTask" type="button">‚ûï Add task</button>
                <button class="btn" id="btnClearDoneTasks" type="button">üßπ Clear done</button>
              </div>

              <div class="divider"></div>

              <div class="row">
                <label class="field">
                  <span class="label">Filter</span>
                  <select id="taskFilter">
                    <option value="all" selected>All</option>
                    <option value="today">Due today</option>
                    <option value="overdue">Overdue</option>
                    <option value="high">High priority</option>
                    <option value="done">Completed</option>
                    <option value="todo">Not done</option>
                  </select>
                </label>

                <label class="field">
                  <span class="label">Search</span>
                  <input id="taskSearch" type="text" placeholder="Search tasks‚Ä¶" />
                </label>
              </div>
            </div>

            <div class="card">
              <div class="cardHeader">
                <h3>Your tasks</h3>
                <p class="muted small"><span id="taskCount">0</span> total</p>
              </div>
              <div id="taskList" class="list"></div>
            </div>
          </div>
        </section>

        <!-- STUDY SETS -->
        <section class="tabpanel" data-tabpanel="studysets" hidden>
          <div class="twoCol">
            <div class="card">
              <div class="cardHeader">
                <h3>Create study set</h3>
                <p class="muted small">Sets hold flashcards + questions.</p>
              </div>

              <div class="formGrid">
                <label class="field">
                  <span class="label">Set name</span>
                  <input id="setName" type="text" placeholder="e.g. Biology: Cells" maxlength="80" />
                </label>

                <label class="field">
                  <span class="label">Subject</span>
                  <select id="setSubject"></select>
                </label>

                <label class="field full">
                  <span class="label">Description (optional)</span>
                  <input id="setDesc" type="text" placeholder="e.g. Key definitions + exam questions" maxlength="120" />
                </label>
              </div>

              <div class="row">
                <button class="btn primary" id="btnCreateSet" type="button">‚ûï Create set</button>
                <button class="btn" id="btnAddDemo" type="button" title="Adds example sets/cards/questions">‚ú® Add demo</button>
              </div>

              <div class="divider"></div>

              <p class="muted small">
                Tip: click a set on the right to manage cards/questions.
              </p>
            </div>

            <div class="card">
              <div class="cardHeader">
                <h3>Your study sets</h3>
                <p class="muted small"><span id="setCount">0</span> sets</p>
              </div>

              <label class="field">
                <span class="label">Search</span>
                <input id="setSearch" type="text" placeholder="Search sets‚Ä¶" />
              </label>

              <div class="divider"></div>

              <div id="setList" class="list"></div>
            </div>
          </div>

          <div class="divider"></div>

          <div class="card">
            <div class="cardHeader">
              <h3>Manage selected set</h3>
              <p class="muted small">Add flashcards + MCQ questions (MVP).</p>
            </div>

            <div class="row wrap">
              <div class="chip">
                <div class="chipLine"><strong id="activeSetName">No set selected</strong></div>
                <div class="chipLine muted"><span id="activeSetMeta">Pick a set to manage it.</span></div>
              </div>
              <button class="btn danger" id="btnDeleteSet" type="button" disabled>üóë Delete set</button>
            </div>

            <div class="twoCol" style="margin-top:12px;">
              <!-- Add Flashcard -->
              <div class="card inner">
                <div class="cardHeader">
                  <h4>Add flashcard</h4>
                  <p class="muted small">Front ‚Üí Back</p>
                </div>

                <div class="formGrid">
                  <label class="field full">
                    <span class="label">Front</span>
                    <textarea id="cardFront" placeholder="e.g. Define osmosis" maxlength="500"></textarea>
                  </label>
                  <label class="field full">
                    <span class="label">Back</span>
                    <textarea id="cardBack" placeholder="e.g. Movement of water molecules..." maxlength="700"></textarea>
                  </label>
                </div>

                <div class="row">
                  <button class="btn primary" id="btnAddCard" type="button" disabled>‚ûï Add card</button>
                </div>
              </div>

              <!-- Add MCQ (Learn mode MVP) -->
              <div class="card inner">
                <div class="cardHeader">
                  <h4>Add Learn question (MCQ)</h4>
                  <p class="muted small">Used in Learn mode.</p>
                </div>

                <div class="formGrid">
                  <label class="field full">
                    <span class="label">Question</span>
                    <textarea id="mcqQ" placeholder="e.g. What is the powerhouse of the cell?" maxlength="500"></textarea>
                  </label>

                  <label class="field">
                    <span class="label">Option A</span>
                    <input id="mcqA" type="text" placeholder="A" maxlength="120" />
                  </label>
                  <label class="field">
                    <span class="label">Option B</span>
                    <input id="mcqB" type="text" placeholder="B" maxlength="120" />
                  </label>
                  <label class="field">
                    <span class="label">Option C</span>
                    <input id="mcqC" type="text" placeholder="C" maxlength="120" />
                  </label>
                  <label class="field">
                    <span class="label">Option D</span>
                    <input id="mcqD" type="text" placeholder="D" maxlength="120" />
                  </label>

                  <label class="field">
                    <span class="label">Correct</span>
                    <select id="mcqCorrect">
                      <option value="A">A</option>
                      <option value="B">B</option>
                      <option value="C">C</option>
                      <option value="D">D</option>
                    </select>
                  </label>
                </div>

                <div class="row">
                  <button class="btn primary" id="btnAddMcq" type="button" disabled>‚ûï Add MCQ</button>
                </div>
              </div>
            </div>

            <div class="twoCol" style="margin-top:12px;">
              <div class="card inner">
                <div class="cardHeader">
                  <h4>Cards in set</h4>
                  <p class="muted small"><span id="cardCount">0</span> cards</p>
                </div>
                <div id="cardList" class="list"></div>
              </div>

              <div class="card inner">
                <div class="cardHeader">
                  <h4>Learn questions in set</h4>
                  <p class="muted small"><span id="mcqCount">0</span> MCQs</p>
                </div>
                <div id="mcqList" class="list"></div>
              </div>
            </div>

          </div>
        </section>

        <!-- FLASHCARDS -->
        <section class="tabpanel" data-tabpanel="flashcards" hidden>
          <div class="card">
            <div class="cardHeader">
              <h3>Flashcards</h3>
              <p class="muted small">Pick a set, then study cards.</p>
            </div>

            <div class="row">
              <label class="field" style="min-width:260px;">
                <span class="label">Study set</span>
                <select id="flashSetSelect"></select>
              </label>

              <button class="btn" id="btnFlashShuffle" type="button">üîÄ Shuffle</button>
              <button class="btn" id="btnFlashPrev" type="button">‚¨Ö Prev</button>
              <button class="btn primary" id="btnFlashFlip" type="button">‚Ü∫ Flip</button>
              <button class="btn" id="btnFlashNext" type="button">Next ‚ûú</button>

              <div class="chip">
                <div class="chipLine"><strong id="flashPos">0 / 0</strong></div>
                <div class="chipLine muted">Cards</div>
              </div>
            </div>

            <div class="divider"></div>

            <div class="flashStage">
              <div class="flashCard" id="flashCard">
                <div class="flashSide" id="flashFront">Pick a set to start.</div>
                <div class="flashSide muted" id="flashBack" hidden>‚Äî</div>
              </div>
            </div>
          </div>
        </section>

        <!-- LEARN (MCQ MVP) -->
        <section class="tabpanel" data-tabpanel="learn" hidden>
          <div class="card">
            <div class="cardHeader">
              <h3>Learn mode (MCQ)</h3>
              <p class="muted small">Answer questions, track accuracy.</p>
            </div>

            <div class="row">
              <label class="field" style="min-width:260px;">
                <span class="label">Study set</span>
                <select id="learnSetSelect"></select>
              </label>
              <button class="btn primary" id="btnLearnStart" type="button">‚ñ∂ Start</button>

              <div class="chip">
                <div class="chipLine"><strong id="learnScore">0%</strong></div>
                <div class="chipLine muted">Accuracy</div>
              </div>

              <div class="chip">
                <div class="chipLine"><strong id="learnProgress">0 / 0</strong></div>
                <div class="chipLine muted">Answered</div>
              </div>
            </div>

            <div class="divider"></div>

            <div id="learnStage" class="learnStage">
              <p class="muted">Pick a set and press Start.</p>
            </div>
          </div>
        </section>

        <!-- TEST (typed answers MVP) -->
        <section class="tabpanel" data-tabpanel="test" hidden>
          <div class="card">
            <div class="cardHeader">
              <h3>Test mode (typed)</h3>
              <p class="muted small">Uses flashcards: you type the answer. (‚â§1 character off accepted; 2+ wrong = wrong.)</p>
            </div>

            <div class="row">
              <label class="field" style="min-width:260px;">
                <span class="label">Study set</span>
                <select id="testSetSelect"></select>
              </label>
              <button class="btn primary" id="btnTestStart" type="button">‚ñ∂ Start test</button>
              <button class="btn" id="btnTestSkip" type="button">‚è≠ Skip</button>

              <div class="chip">
                <div class="chipLine"><strong id="testScore">0%</strong></div>
                <div class="chipLine muted">Score</div>
              </div>

              <div class="chip">
                <div class="chipLine"><strong id="testProgress">0 / 0</strong></div>
                <div class="chipLine muted">Done</div>
              </div>
            </div>

            <div class="divider"></div>

            <div id="testStage" class="testStage">
              <p class="muted">Pick a set and press Start test.</p>
            </div>
          </div>
        </section>
      </div>
    </section>

    <!-- RIGHT: Timer + quick stats -->
    <aside class="panel">
      <div class="panelHeader">
        <div>
          <h2>Focus timer</h2>
          <p class="muted small">Space = start/pause ‚Ä¢ R = reset</p>
        </div>
      </div>

      <div class="panelBody">
        <div class="formGrid">
          <label class="field">
            <span class="label">Focus (min)</span>
            <input id="tmFocus" type="number" min="10" max="90" value="25" />
          </label>
          <label class="field">
            <span class="label">Short break</span>
            <input id="tmShort" type="number" min="3" max="20" value="5" />
          </label>
          <label class="field">
            <span class="label">Long break</span>
            <input id="tmLong" type="number" min="10" max="45" value="15" />
          </label>
        </div>

        <div class="timerCircle" id="timerCircle" style="--p:0%;">
          <div class="ring" aria-hidden="true"></div>
          <div class="timerInner">
            <div class="muted small" id="tmMode">Focus</div>
            <div class="timerTime" id="tmTime">25:00</div>
            <div class="muted small" id="tmHint">Session 1 of 4</div>
          </div>
        </div>

        <div class="row center">
          <button class="btn primary" id="btnTimerStart" type="button">‚ñ∂ Start</button>
          <button class="btn" id="btnTimerSkip" type="button">‚è≠ Skip</button>
          <button class="btn" id="btnTimerReset" type="button">‚Ü∫ Reset</button>
        </div>

        <div class="divider"></div>

        <div class="statsGrid">
          <div class="stat">
            <div class="muted small">Today studied</div>
            <div class="statBig" id="uiTodayMinutes">0m</div>
          </div>
          <div class="stat">
            <div class="muted small">This week</div>
            <div class="statBig" id="uiWeekMinutes">0m</div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="field">
          <div class="row between">
            <span class="label">Weekly goal</span>
            <span class="muted small"><span id="uiGoalText">0 / 600</span> mins</span>
          </div>
          <div class="bar"><div id="uiGoalBar"></div></div>
          <div class="row" style="margin-top:10px;">
            <input id="uiWeeklyGoal" type="number" min="60" max="2400" value="600" style="max-width:160px;" />
            <span class="muted small">minutes</span>
          </div>
        </div>

        <div class="divider"></div>

        <div class="row between">
          <div>
            <div class="muted small">Task completion (7d)</div>
            <div class="statBig" id="uiCompletion">0%</div>
          </div>
          <button class="btn" id="btnQuickSetTab" type="button" title="Jump to Study Sets">üì¶ Sets</button>
        </div>
      </div>
    </aside>
  </main>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <!-- Scripts: order matters -->
  <script src="utils.js"></script>
  <script src="app.js"></script>
  <script src="tasks.js"></script>
  <script src="timer.js"></script>
  <script src="studysets.js"></script>
  <script src="flashcards.js"></script>
  <script src="learnmode.js"></script>
  <script src="testmode.js"></script>
</body>
</html>